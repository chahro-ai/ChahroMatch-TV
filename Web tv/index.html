<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChahroMatch.TV</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„ØµÙØ­Ø© ChahroMatch.TV --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù‡Ù†Ø§ */
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #1db954, #169c45);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            position: relative;
            transition: background 0.5s ease;
            overflow-x: hidden;
        }
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: rgba(26, 166, 74, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 100;
            text-align: right;
            transition: all 0.3s ease;
        }
        .header:hover {
            background-color: rgba(26, 166, 74, 1);
        }
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            position: relative;
            display: inline-block;
        }
        .logo::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: white;
            transition: width 0.3s ease;
        }
        .logo:hover::after {
            width: 100%;
        }
        .main-content {
            width: 100%;
            max-width: 100%;
            text-align: center;
            padding: 20px;
            margin-top: 70px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .title {
            font-size: 3rem;
            margin-bottom: 10px;
            font-weight: bold;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            animation: mainFadeIn 1s ease;
        }
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: mainFadeIn 1.2s ease;
        }
        .login-container {
            background-color: rgba(255, 255, 255, 0.15);
            padding: 30px;
            border-radius: 15px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(0);
            transition: all 0.4s ease;
            animation: slideUp 0.8s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 10;
        }
        .login-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }
        .form-group {
            margin-bottom: 20px;
            text-align: right;
        }
        .code-container {
            position: relative;
            width: 100%;
            margin-bottom: 20px;
        }
        #codeDisplay {
            width: 100%;
            padding: 15px;
            background-color: rgba(255,255,255,0.2);
            border-radius: 10px;
            font-size: 1.2rem;
            min-height: 2.5rem;
            word-break: break-all;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #codeDisplay:hover {
            background-color: rgba(255,255,255,0.25);
        }
        .copy-btn {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(17, 134, 58, 0.8);
            border: none;
            border-radius: 6px;
            color: white;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0.8;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .copy-btn:hover {
            opacity: 1;
            background: rgba(17, 134, 58, 1);
            transform: translateY(-50%) scale(1.05);
        }
        .copy-btn:active {
            transform: translateY(-50%) scale(0.95);
        }
        .copy-icon {
            width: 18px;
            height: 18px;
            fill: white;
        }
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            white-space: nowrap; /* Ù…Ù†Ø¹ Ø§Ù„Ù†Øµ Ù…Ù† Ø§Ù„Ø§Ù„ØªÙØ§Ù */
        }
        .copy-btn:hover .tooltip {
            opacity: 1;
        }
        .form-input, .action-button { /* Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙØ¦Ø© Ù…Ø´ØªØ±ÙƒØ© Ù„Ù„Ø£Ø²Ø±Ø§Ø± */
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: inherit; /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†ÙØ³ Ø®Ø· Ø§Ù„ØµÙØ­Ø© */
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 15px; /* ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ù‡Ø§Ù…Ø´ Ø§Ù„Ø³ÙÙ„ÙŠ */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        .form-input {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            text-align: center;
            direction: rtl;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            cursor: text; /* ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø¤Ø´Ø± Ù„Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        }
        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        .form-input:focus {
            outline: none;
            background-color: rgba(255, 255, 255, 0.3);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2), 0 0 0 3px rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* ØªØ¯Ø±Ø¬Ø§Øª Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .login-btn {
             background: linear-gradient(to right, #11863a, #0d7231);
             color: white;
        }
        .play-game-btn {
             background: linear-gradient(to right, #0077cc, #005fa3); /* ØªØ¯Ø±Ø¬ Ø£Ø²Ø±Ù‚ Ù„Ø²Ø± Ø§Ù„Ù„Ø¹Ø¨Ø© */
             color: white;
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù„Ø§Ù…Ø¹ (Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±) */
        .action-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.6s ease;
        }
        .action-button:hover:before {
            left: 100%;
        }
        .action-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        .action-button:active {
            transform: translateY(1px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        /* ØªØ®ØµÙŠØµ ØªØ£Ø«ÙŠØ± hover Ù„ÙƒÙ„ Ø²Ø± */
        .login-btn:hover { background: linear-gradient(to right, #0a6e2c, #095324); }
        .play-game-btn:hover { background: linear-gradient(to right, #005fa3, #004c82); }

        #errorMsg {
            color: #ffcccc;
            min-height: 1.2rem;
            font-size: 0.9rem;
            text-align: center;
            transition: all 0.3s ease;
            text-shadow: 0 0 5px rgba(255, 0, 0, 0.5);
        }
        #copyNotification {
            position: fixed;
            top: 80px; /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ù„ÙŠÙƒÙˆÙ† ØªØ­Øª Ø§Ù„Ù‡ÙŠØ¯Ø± */
            left: 50%;
            transform: translateX(-50%) translateY(-150px); /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø³Ø§ÙØ© Ù„ÙŠØ¨Ø¯Ø£ Ù…Ù† Ø£Ø¹Ù„Ù‰ */
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 0.9rem;
            transition: transform 0.4s ease;
            z-index: 2000; /* ÙÙˆÙ‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
        }
        #copyNotification.show {
            transform: translateX(-50%) translateY(0);
        }

        /* --- Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù‚Ù„Ø¨ Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±) --- */
        .heart-container {
            position: fixed;
            left: 50px;
            top: 50%;
            transform: translateY(-50%);
            width: 100px;
            height: 100px;
            z-index: 5;
            perspective: 1000px;
            animation: heartFloat 4s ease-in-out infinite;
        }
        .heart {
            position: relative;
            width: 100px;
            height: 90px;
            transform-style: preserve-3d;
            animation: heartBeat 2s ease-in-out infinite, heartRotate 15s linear infinite;
        }
        .heart:before,
        .heart:after {
            position: absolute;
            content: "";
            left: 50px;
            top: 0;
            width: 50px;
            height: 80px;
            background: linear-gradient(135deg, #00ff7f, #00a651);
            border-radius: 50px 50px 0 0;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
            box-shadow:
                0 0 20px #00ff7f,
                0 0 40px rgba(0, 255, 127, 0.5),
                0 0 60px rgba(0, 255, 127, 0.3),
                0 0 80px rgba(0, 255, 127, 0.1);
        }
        .heart:after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }
        .liquid {
            position: absolute;
            bottom: -10px;
            left: 40px;
            width: 20px;
            height: 20px;
            background: #00ff7f;
            border-radius: 50%;
            box-shadow:
                0 0 10px #00ff7f,
                0 0 20px rgba(0, 255, 127, 0.5);
            animation: dropLiquid 3s linear infinite;
            opacity: 0;
        }
        .liquid:nth-child(2) { animation-delay: 1s; left: 30px; }
        .liquid:nth-child(3) { animation-delay: 2s; left: 50px; }
        .heart-glow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            filter: blur(20px);
            background: rgba(0, 255, 127, 0.2);
            animation: pulse 4s infinite;
        }

        /* --- Keyframes Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±) --- */
        @keyframes heartBeat { /*...*/ }
        @keyframes heartRotate { /*...*/ }
        @keyframes heartFloat { /*...*/ }
        @keyframes dropLiquid { /*...*/ }
        @keyframes pulse { /*...*/ }
        @keyframes mainFadeIn { /* Ø¥Ø¹Ø§Ø¯Ø© ØªØ³Ù…ÙŠØ© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¹Ø§Ø±Ø¶ */
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideUp { /*...*/ }

        /* --- Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Modal) Ù„Ù„Ø¹Ø¨Ø© --- */
        .modal {
            display: none; /* Ù…Ø®ÙÙŠØ© Ø¨Ø´ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ */
            position: fixed;
            z-index: 1500; /* ÙÙˆÙ‚ Ø§Ù„Ù‚Ù„Ø¨ ÙˆØªØ­Øª Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø³Ø® */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø±ÙŠØ± Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙƒØ¨ÙŠØ±Ù‹Ø§ */
            background-color: rgba(0, 0, 0, 0.6); /* Ø®Ù„ÙÙŠØ© Ø´Ø¨Ù‡ Ø´ÙØ§ÙØ© */
            backdrop-filter: blur(5px); /* ØªØ£Ø«ÙŠØ± Ø¶Ø¨Ø§Ø¨ÙŠ Ù„Ù„Ø®Ù„ÙÙŠØ© */
            animation: modalFadeIn 0.4s ease;
        }

        .modal-content {
            background: linear-gradient(145deg, #e8f1f5, #ffffff); /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø© */
            margin: 8% auto; /* ØªÙˆØ³ÙŠØ· Ø¹Ù…ÙˆØ¯ÙŠ ÙˆØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‡Ø§Ù…Ø´ Ø§Ù„Ø¹Ù„ÙˆÙŠ */
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 480px; /* Ø¹Ø±Ø¶ Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¹Ø¨Ø© */
            position: relative;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.5s ease-out;
        }

        .close-modal-btn {
            position: absolute;
            top: 10px;
            left: 15px; /* ØªØºÙŠÙŠØ± Ù„Ù„ÙŠØ³Ø§Ø± ÙÙŠ RTL */
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0 5px;
            line-height: 1;
            transition: color 0.2s ease;
        }
        .close-modal-btn:hover,
        .close-modal-btn:focus {
            color: #ff4444; /* Ù„ÙˆÙ† Ø£Ø­Ù…Ø± Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± */
            text-decoration: none;
            outline: none;
        }

        /* --- Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù„Ø¹Ø¨Ø© X O (Ø§Ù„Ù…Ø¯Ù…Ø¬Ø© ÙˆØ§Ù„Ù…Ø¹Ø¯Ù„Ø©) --- */
        /* Ù…ØªØºÙŠØ±Ø§Øª CSS Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø© */
        .modal-content { /* ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
            --cell-size: 90px;
            --board-gap: 6px;
            --primary-color: #0077cc;
            --secondary-color: #ff4444;
            --board-bg: #dceefc; /* Ø®Ù„ÙÙŠØ© Ù„ÙˆØ­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© */
            --cell-bg: #ffffff;
            --cell-hover-bg: #e9f5ff;
            --border-color: #c0d9ec;
            --shadow-light: rgba(0, 119, 204, 0.2);
            --shadow-dark: rgba(50, 50, 93, 0.15);
            --text-color: #333; /* Ù„ÙˆÙ† Ø§Ù„Ù†Øµ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© */
            --winner-bg: linear-gradient(45deg, #aaffaa, #d4ffaa);
            --game-font: 'Cairo', sans-serif; /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†ÙØ³ Ø§Ù„Ø®Ø· */
        }

        /* ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ø· Ø¹Ù„Ù‰ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù„Ø¹Ø¨Ø© */
        #gameModal h1, #gameModal #status-message, #gameModal #restart-button {
             font-family: var(--game-font);
             color: var(--text-color); /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„ÙˆÙ† Ø§Ù„Ù†Øµ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø© */
        }

        #gameModal h1 {
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 1.8rem; /* ØªØµØºÙŠØ± Ø­Ø¬Ù… Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© */
             text-align: center; /* ØªÙˆØ³ÙŠØ· Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© */
             animation: none; /* Ø¥Ø²Ø§Ù„Ø© Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø£ØµÙ„ÙŠ */
        }

        #gameModal #board { /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø­Ø¯Ø¯ Ù„ÙŠØ´Ù…Ù„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙÙ‚Ø· */
            display: grid;
            grid-template-columns: repeat(3, var(--cell-size));
            grid-template-rows: repeat(3, var(--cell-size));
            grid-gap: var(--board-gap);
            margin: 20px auto; /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ù„ÙˆØ­Ø© */
            background-color: var(--board-bg);
            padding: var(--board-gap);
            border-radius: 10px;
            box-shadow: 0 8px 25px var(--shadow-dark), 0 5px 15px var(--shadow-light);
            position: relative;
            width: fit-content; /* Ø¬Ø¹Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ù„ÙˆØ­Ø© ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
            /* Ø¥Ø²Ø§Ù„Ø© Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø¸Ù‡ÙˆØ± Ù„Ø£Ù†Ù‡ Ø³ÙŠØ¸Ù‡Ø± Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
        }

        #gameModal .cell {
            width: var(--cell-size);
            height: var(--cell-size);
            border: none;
            border-radius: 8px;
            font-size: calc(var(--cell-size) * 0.6);
            font-weight: 700;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            background-color: var(--cell-bg);
            box-shadow: 0 2px 5px var(--shadow-dark);
            transition: transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        background-color 0.2s ease,
                        box-shadow 0.2s ease;
            position: relative;
             opacity: 1; /* ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¸Ø§Ù‡Ø±Ø© */
             animation: none; /* Ø¥Ø²Ø§Ù„Ø© Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø¸Ù‡ÙˆØ± Ø§Ù„ÙØ±Ø¯ÙŠ */
        }

        #gameModal .cell:hover {
            transform: scale(1.08);
            background-color: var(--cell-hover-bg);
            box-shadow: 0 6px 15px var(--shadow-light);
            z-index: 10;
        }

        #gameModal .cell .symbol-x { color: var(--primary-color); }
        #gameModal .cell .symbol-o { color: var(--secondary-color); }

        #gameModal .cell span {
            display: inline-block;
            animation: symbolAppear 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        #gameModal .cell.winner {
             background: var(--winner-bg);
             animation: winnerPulse 0.8s infinite alternate;
             box-shadow: 0 0 20px 5px #aaffaa;
             z-index: 5;
        }
        #gameModal .cell.winner span { color: #333; }

        #gameModal #status-message {
            font-size: 1.3em; /* ØªØµØºÙŠØ± Ø­Ø¬Ù… Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
            margin-top: 15px;
            min-height: 1.5em;
            color: var(--text-color);
            font-weight: 700;
            transition: color 0.3s ease;
            text-align: center; /* ØªÙˆØ³ÙŠØ· */
        }
        #gameModal #status-message.announce { /* Ù†ÙØ³ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ */
            animation: statusAnnounce 0.6s ease-out;
            color: #28a745;
        }
         #gameModal #status-message.announce.tie { color: #ffae42; }
         #gameModal #status-message.announce.lose { color: var(--secondary-color); }


        #gameModal #restart-button {
            margin: 20px auto 0 auto; /* ØªÙˆØ³ÙŠØ· ÙˆØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‡Ø§Ù…Ø´ Ø§Ù„Ø¹Ù„ÙˆÙŠ */
            display: block; /* Ø¶Ø±ÙˆØ±ÙŠ Ù„Ù„ØªÙˆØ³ÙŠØ· Ù…Ø¹ margin auto */
            padding: 10px 25px; /* ØªØµØºÙŠØ± Ø§Ù„Ø­Ø´Ùˆ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
            font-size: 1em;
            font-family: var(--game-font);
            font-weight: 700;
            cursor: pointer;
            background-image: linear-gradient(45deg, #ffae42, #ff8c00); /* ØªØ¯Ø±Ø¬ Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ */
            color: white;
            border: none;
            border-radius: 25px;
            transition: transform 0.15s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 15px rgba(255, 140, 0, 0.4);
        }
         #gameModal #restart-button:hover {
             transform: translateY(-2px);
             box-shadow: 0 6px 20px rgba(255, 140, 0, 0.6);
         }
         #gameModal #restart-button:active {
             transform: translateY(1px);
             box-shadow: 0 2px 10px rgba(255, 140, 0, 0.4);
         }

        /* ØªÙ†Ø³ÙŠÙ‚ Canvas Ù„Ù„Ù€ Confetti (Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„) */
        #gameModal #confetti-canvas {
            position: absolute; /* Ù†Ø³Ø¨Ø© Ø¥Ù„Ù‰ modal-content */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
             border-radius: 15px; /* Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© Ø­ÙˆØ§Ù Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
             overflow: hidden; /* Ø¶Ù…Ø§Ù† Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ù‚ØµØ§ØµØ§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
        }

        /* Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ù†ØªØµØ§Ø±Ø§Øª */
        #winCounter {
             margin-top: 10px;
             font-size: 1.1rem;
             color: #005fa3; /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙÙˆØ² */
             font-weight: bold;
             text-align: center;
        }

        /* --- Keyframes Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† --- */
        @keyframes symbolAppear { /*...*/ }
        @keyframes winnerPulse { /*...*/ }
        @keyframes statusAnnounce { /*...*/ }
        @keyframes modalFadeIn {
             from { opacity: 0; }
             to { opacity: 1; }
        }
        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }


        /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© */
        @media (max-width: 900px) {
            .heart-container { /*...*/ }
        }
        @media (max-width: 600px) {
            .title { font-size: 2.5rem; }
            .login-container { padding: 20px; }
            .heart-container { display: none; }
            .modal-content { margin: 15% auto; width: 95%; padding: 20px; }
            #gameModal .cell { --cell-size: 70px; font-size: calc(var(--cell-size) * 0.6); }
             #gameModal #board { width: fit-content; } /* Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯ */
            #gameModal h1 { font-size: 1.5rem; }
            #gameModal #status-message { font-size: 1.1em; }
            #gameModal #restart-button { padding: 8px 20px; font-size: 0.9em;}
            #winCounter { font-size: 1rem; }
        }
         @media (max-width: 400px) {
             #gameModal .cell { --cell-size: 60px; font-size: calc(var(--cell-size) * 0.6); }
         }

    </style>
</head>
<body>
    <div class="header">
        <div class="logo">ChahroMatch.TV</div>
    </div>

    <div class="heart-container">
        <div class="heart-glow"></div>
        <div class="heart">
            <div class="liquid"></div> <div class="liquid"></div> <div class="liquid"></div>
        </div>
    </div>

    <div class="main-content">
        <h1 class="title">ChahroMatch.TV</h1>
        <p class="subtitle"> Ø£Ù†Ø´Ø¦ Ø±Ù…Ø² VIP Ø¹Ø¨Ø± Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ø£Ùˆ Ø§Ù„ÙÙˆØ² ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø© 3 Ù…Ø±Ø§Øª!</p>
        <div class="login-container">
            <div class="code-container">
                <div id="codeDisplay">Ø§Ù„ÙƒÙˆØ¯ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§</div>
                <button id="copyBtn" class="copy-btn" style="display: none;">
                    <svg class="copy-icon" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill="currentColor"/></svg>
                    <span class="tooltip">Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯</span>
                </button>
            </div>
            <button id="generateBtn" class="action-button login-btn">Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ù‚Ù†ÙˆØ§Øª VIP</button>
            <button id="playGameBtn" class="action-button play-game-btn"> Ø§Ù„Ø¹Ø¨ Ù„ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¯ Ù‚Ù†ÙˆÙ„Øª vip</button>
            <input type="password" id="secretInput" class="form-input" placeholder=" Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ù„ØªÙØ¹ÙŠÙ„ Ø²Ø± Ù…Ø¨Ø§Ø´Ø±Ø© (...)" maxlength="10" required>
            <div id="errorMsg"></div>
        </div>
    </div>

    <div id="copyNotification" style="display: none;">ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!</div>

    <div id="gameModal" class="modal">
        <div class="modal-content">
            <span class="close-modal-btn">&times;</span>
            <canvas id="confetti-canvas"></canvas> <h1>Ù„Ø¹Ø¨Ø© X O</h1>
            <div id="status-message"></div>
            <div id="winCounter">Ø§Ù„Ø§Ù†ØªØµØ§Ø±Ø§Øª: 0 / 3</div> <div id="board"></div>
            <button id="restart-button">Ø§Ù„ØªØ§Ù„ÙŠ - Ø¬Ø±Ø¨ Ù…Ø±Ø© Ø§Ø®Ø±Ù‰</button>
            </div>
    </div>
    <script>
        // --- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„ÙˆØ§Ø¬Ù‡Ø© VIP ---
        const generateBtn = document.getElementById('generateBtn');
        const secretInput = document.getElementById('secretInput');
        const errorMsg = document.getElementById('errorMsg');
        const codeDisplay = document.getElementById('codeDisplay');
        const copyBtn = document.getElementById('copyBtn');
        const copyNotification = document.getElementById('copyNotification');
        const heart = document.querySelector('.heart'); // Ø§Ù„Ù‚Ù„Ø¨ Ù„Ù„ØªØ£Ø«ÙŠØ±Ø§Øª
        const subtitleElement = document.querySelector('.subtitle');

        // --- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø© ---
        const playGameBtn = document.getElementById('playGameBtn');
        const gameModal = document.getElementById('gameModal');
        const closeModalBtn = gameModal.querySelector('.close-modal-btn');
        const winCounterElement = gameModal.querySelector('#winCounter');
        const gameBoardElement = gameModal.querySelector("#board"); // Ù„ÙˆØ­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
        const gameStatusMessageElement = gameModal.querySelector("#status-message"); // Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
        const gameRestartButton = gameModal.querySelector("#restart-button"); // Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
        const confettiCanvas = gameModal.querySelector('#confetti-canvas'); // Canvas Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„

        // --- Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ¹Ø¯Ø§Ø¯ Ø§Ù„ÙÙˆØ² ---
        let humanWins = 0;
        const WINS_REQUIRED = 3;
        let game_gameActive = false; // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø§Ø¯Ø¦Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¹Ø§Ø±Ø¶
        let game_currentPlayer = "X"; // X Ù‡Ùˆ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†
        let game_gameState = ["", "", "", "", "", "", "", "", ""];
        const GAME_HUMAN_PLAYER = "X";
        const GAME_BOT_PLAYER = "O";
        const game_winPatterns = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]
        ];

        // --- Ø¥Ø¹Ø¯Ø§Ø¯ Confetti (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ¹Ø±ÙŠÙ Canvas) ---
        let game_myConfetti; // Ø³ÙŠØªÙ… ØªÙ‡ÙŠØ¦ØªÙ‡ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©

        // --- Ø¯ÙˆØ§Ù„ ÙˆØ§Ø¬Ù‡Ø© VIP ---
        generateBtn.addEventListener('click', function() {
            const secret = secretInput.value;
            errorMsg.textContent = ''; // Ù…Ø³Ø­ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø´Ø±Ø·: Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„ØµØ­ÙŠØ­ Ø£Ùˆ ØªØ­Ù‚ÙŠÙ‚ Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ù†ØªØµØ§Ø±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            if (secret === '123' || humanWins >= WINS_REQUIRED) {
                // --- Ù†ÙØ³ Ù…Ù†Ø·Ù‚ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ ---
                heart.style.animation = 'heartBeat 0.5s ease-in-out 3, heartRotate 15s linear infinite';
                setTimeout(() => { heart.style.animation = 'heartBeat 2s ease-in-out infinite, heartRotate 15s linear infinite'; }, 1500);
                this.classList.add('btn-clicked');
                setTimeout(() => { this.classList.remove('btn-clicked'); }, 300);
                codeDisplay.innerHTML = '<span style="opacity: 0.7">Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¯...</span>';
                copyBtn.style.display = 'none';

                setTimeout(() => {
                    let code = '';
                    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                    for (let i = 0; i < 16; i++) { code += chars.charAt(Math.floor(Math.random() * chars.length)); }

                    codeDisplay.style.opacity = '0';
                    setTimeout(() => {
                        codeDisplay.textContent = code;
                        codeDisplay.style.opacity = '1';
                        codeDisplay.style.boxShadow = '0 0 10px rgba(255, 255, 255, 0.5)';
                        copyBtn.style.display = 'flex';
                        copyBtn.style.opacity = '0';
                        setTimeout(() => {
                            copyBtn.style.opacity = '1';
                            codeDisplay.style.boxShadow = 'inset 0 2px 5px rgba(0, 0, 0, 0.1)';
                        }, 300);
                    }, 300);
                }, 800);
                 // --- Ù†Ù‡Ø§ÙŠØ© Ù…Ù†Ø·Ù‚ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¯ ---
            } else {
                // --- Ù†ÙØ³ Ù…Ù†Ø·Ù‚ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø£ØµÙ„ÙŠ ---
                errorMsg.style.opacity = '0';
                copyBtn.style.display = 'none';
                setTimeout(() => {
                    errorMsg.textContent = 'Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ù„Ù… ØªØ­Ù‚Ù‚ Ø§Ù„Ø§Ù†ØªØµØ§Ø±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©!';
                    errorMsg.style.opacity = '1';
                    // ØªØ£Ø«ÙŠØ± Ø§Ù‡ØªØ²Ø§Ø² Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
                    secretInput.style.transform = 'translateX(10px)';
                    setTimeout(() => { secretInput.style.transform = 'translateX(-10px)';
                        setTimeout(() => { secretInput.style.transform = 'translateX(5px)';
                            setTimeout(() => { secretInput.style.transform = 'translateX(-5px)';
                                setTimeout(() => { secretInput.style.transform = 'translateX(0)'; }, 50);
                            }, 50);
                        }, 50);
                    }, 50);
                }, 200);
                 // --- Ù†Ù‡Ø§ÙŠØ© Ù…Ù†Ø·Ù‚ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ ---
            }
        });

        copyBtn.addEventListener('click', function() {
            const codeText = codeDisplay.textContent;
            if (codeText && codeText !== 'Ø§Ù„ÙƒÙˆØ¯ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§' && !codeText.includes('Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡')) {
                navigator.clipboard.writeText(codeText).then(() => {
                    this.style.backgroundColor = '#0a6e2c';
                    setTimeout(() => { this.style.backgroundColor = 'rgba(17, 134, 58, 0.8)'; }, 300);
                    heart.style.animation = 'heartBeat 0.3s ease-in-out 2, heartRotate 15s linear infinite';
                    setTimeout(() => { heart.style.animation = 'heartBeat 2s ease-in-out infinite, heartRotate 15s linear infinite'; }, 600);

                    notification.style.display = 'block';
                    setTimeout(() => {
                        notification.classList.add('show');
                        setTimeout(() => {
                            notification.classList.remove('show');
                            setTimeout(() => { notification.style.display = 'none'; }, 400);
                        }, 2000);
                    }, 10);
                });
            }
        });

        // --- Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© (Modal) ---
        playGameBtn.addEventListener('click', () => {
            gameModal.style.display = 'flex'; // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø©
             // ØªÙ‡ÙŠØ¦Ø© Confetti Ø¹Ù†Ø¯ Ø£ÙˆÙ„ ÙØªØ­ Ù„Ù„Ù…ÙˆØ¯Ø§Ù„ ÙÙ‚Ø·
             if (!game_myConfetti) {
                 game_myConfetti = confetti.create(confettiCanvas, { resize: true, useWorker: true });
             }
            game_startGame(); // Ø¨Ø¯Ø¡ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©
        });

        closeModalBtn.addEventListener('click', () => {
            gameModal.style.display = 'none'; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø©
        });

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ù…Ø­ØªÙˆØ§Ù‡Ø§
        window.addEventListener('click', (event) => {
            if (event.target == gameModal) {
                gameModal.style.display = 'none';
            }
        });

        // --- Ù…Ù†Ø·Ù‚ Ù„Ø¹Ø¨Ø© X O (Ù…ÙØ¹Ø¯Ù‘Ù„ Ù„Ù„Ø¹Ù…Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„) ---

        // 1. Ø¥Ù†Ø´Ø§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        function game_createBoard() {
            gameBoardElement.innerHTML = "";
            gameBoardElement.style.opacity = '0'; // Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¥Ø°Ø§ Ø£Ø±Ø¯Ù†Ø§
            setTimeout(() => { gameBoardElement.style.opacity = '1'; }, 50); // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ù„Ø¸Ù‡ÙˆØ±

            game_gameState.forEach((_, index) => {
                const cellElement = document.createElement("div");
                cellElement.classList.add("cell"); // Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙØ¦Ø© .cell Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø¯Ø§Ø®Ù„ #gameModal
                cellElement.dataset.index = index;
                // Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ£Ø®ÙŠØ± Ø£Ù†ÙŠÙ…ÙŠØ´Ù† ÙØ±Ø¯ÙŠ Ù‡Ù†Ø§ØŒ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
                cellElement.addEventListener("click", game_handleCellClick);
                gameBoardElement.appendChild(cellElement);
            });
        }

        // 2. Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ù†Ù‚Ø±Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨
        function game_handleCellClick(event) {
            const clickedCellIndex = parseInt(event.target.dataset.index);
            if (!game_gameActive || game_gameState[clickedCellIndex] !== "" || game_currentPlayer !== GAME_HUMAN_PLAYER) {
                return;
            }
            game_playMove(clickedCellIndex, GAME_HUMAN_PLAYER);
            if (game_checkWinner()) return;
            game_currentPlayer = GAME_BOT_PLAYER;
            game_updateStatus();
            setTimeout(game_botMove, 400);
        }

        // 3. ØªÙ†ÙÙŠØ° Ø­Ø±ÙƒØ©
        function game_playMove(index, player) {
            if (game_gameActive && game_gameState[index] === "") {
                game_gameState[index] = player;
                const cellElement = gameBoardElement.querySelector(`.cell[data-index='${index}']`);
                const symbolClass = player === GAME_HUMAN_PLAYER ? 'symbol-x' : 'symbol-o';
                cellElement.innerHTML = `<span class="${symbolClass}">${player}</span>`;
                cellElement.removeEventListener('click', game_handleCellClick);
                cellElement.style.cursor = 'default';
            }
        }

        // 4. Ø­Ø±ÙƒØ© Ø§Ù„Ø¨ÙˆØª (Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©)
        function game_botMove() {
            if (!game_gameActive) return;
            const availableSpots = [];
            game_gameState.forEach((cell, index) => { if (cell === "") availableSpots.push(index); });
            if (availableSpots.length > 0) {
                const randomIndex = Math.floor(Math.random() * availableSpots.length);
                const chosenIndex = availableSpots[randomIndex];
                game_playMove(chosenIndex, GAME_BOT_PLAYER);
                if (game_checkWinner()) return;
            }
            game_currentPlayer = GAME_HUMAN_PLAYER;
            game_updateStatus();
        }

        // 5. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙØ§Ø¦Ø² Ø£Ùˆ Ø§Ù„ØªØ¹Ø§Ø¯Ù„ + ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙÙˆØ²
        function game_checkWinner() {
            let roundWon = false;
            let winner = null;
            let winningPattern = [];
            for (let pattern of game_winPatterns) {
                const [a, b, c] = pattern;
                if (game_gameState[a] && game_gameState[a] === game_gameState[b] && game_gameState[a] === game_gameState[c]) {
                    roundWon = true;
                    winner = game_gameState[a];
                    winningPattern = pattern;
                    break;
                }
            }

            gameStatusMessageElement.classList.remove('announce', 'tie', 'lose');

            if (roundWon) {
                game_gameActive = false;
                let message = "";
                let messageClass = 'announce';

                if (winner === GAME_HUMAN_PLAYER) {
                    message = "ğŸ‰ Ù„Ù‚Ø¯ ÙØ²Øª! ğŸ‰";
                    humanWins++; // --- Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙÙˆØ² ---
                    winCounterElement.textContent = `Ø§Ù„Ø§Ù†ØªØµØ§Ø±Ø§Øª: ${humanWins} / ${WINS_REQUIRED}`; // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯
                    game_triggerConfetti(); // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø­ØªÙØ§Ù„

                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ØªÙ… ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø´Ø±Ø·
                    if (humanWins >= WINS_REQUIRED) {
                         subtitleElement.textContent = "ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ.";
                         secretInput.placeholder = "Ø§Ù„Ø´Ø±Ø· ØªØ­Ù‚Ù‚!";
                         secretInput.disabled = true; // ØªØ¹Ø·ÙŠÙ„ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
                         // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù‡Ù†Ø§ Ø¹Ù†Ø¯ ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø´Ø±Ø·
                          playGameBtn.textContent = "Ø§Ù„Ø´Ø±Ø· ØªØ­Ù‚Ù‚! ğŸ‰";
                          playGameBtn.disabled = true; // ØªØ¹Ø·ÙŠÙ„ Ø²Ø± Ø§Ù„Ù„Ø¹Ø¨
                          // Ø±Ø¨Ù…Ø§ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ù‚ØµÙŠØ±Ø©
                          setTimeout(() => { gameModal.style.display = 'none'; }, 2500);
                    }

                } else {
                    message = "ğŸ’» Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙØ§Ø²! ğŸ’»";
                    messageClass += ' lose';
                }
                gameStatusMessageElement.textContent = message;
                gameStatusMessageElement.classList.add(messageClass);
                winningPattern.forEach(index => { gameBoardElement.querySelector(`.cell[data-index='${index}']`).classList.add('winner'); });
                game_disableBoardClicks();
                return true;
            }

            if (!game_gameState.includes("")) {
                game_gameActive = false;
                gameStatusMessageElement.textContent = "ğŸ¤ ØªØ¹Ø§Ø¯Ù„! ğŸ¤";
                gameStatusMessageElement.classList.add('announce', 'tie');
                game_disableBoardClicks();
                return true;
            }
            return false;
        }

        // 6. ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¨Ø¹Ø¯ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø©
        function game_disableBoardClicks() {
            const cells = gameBoardElement.querySelectorAll('.cell');
            cells.forEach(cell => {
                 if (!game_gameState[parseInt(cell.dataset.index)]) {
                     cell.removeEventListener('click', game_handleCellClick);
                     cell.style.cursor = 'default';
                 }
             });
         }

        // 7. ØªØ­Ø¯ÙŠØ« Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø©
        function game_updateStatus() {
            if (game_gameActive) {
                gameStatusMessageElement.textContent = `Ø¯ÙˆØ±: ${game_currentPlayer === GAME_HUMAN_PLAYER ? 'Ø£Ù†Øª (X)' : 'Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (O)'}`;
                gameStatusMessageElement.classList.remove('announce', 'tie', 'lose');
            }
        }

        // 8. Ø¨Ø¯Ø¡/Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function game_startGame() {
            game_gameActive = true;
            game_currentPlayer = GAME_HUMAN_PLAYER;
            game_gameState = ["", "", "", "", "", "", "", "", ""];
            gameStatusMessageElement.classList.remove('announce', 'tie', 'lose');
            game_createBoard();
            game_updateStatus();
             // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø¹Ø¯Ø§Ø¯ ÙŠØ¸Ù‡Ø± Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
             winCounterElement.textContent = `Ø§Ù„Ø§Ù†ØªØµØ§Ø±Ø§Øª: ${humanWins} / ${WINS_REQUIRED}`;
        }

        // 9. Ø¯Ø§Ù„Ø© ØªÙØ¹ÙŠÙ„ Confetti (ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ù…Ù‡ÙŠØ£)
        function game_triggerConfetti() {
             if (game_myConfetti) { // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Confetti Ù…Ù‡ÙŠØ£
                 game_myConfetti({ particleCount: 150, spread: 90, origin: { y: 0.6 } });
                 setTimeout(() => {
                      game_myConfetti({ particleCount: 100, angle: 60, spread: 70, origin: { x: 0 } });
                      game_myConfetti({ particleCount: 100, angle: 120, spread: 70, origin: { x: 1 } });
                 }, 250);
             }
        }

        // Ø±Ø¨Ø· Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
        gameRestartButton.addEventListener("click", game_startGame);

        // --- Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© Ù„ÙˆØ§Ø¬Ù‡Ø© VIP (Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„ØªØ±ÙƒÙŠØ²) ---
        document.addEventListener('DOMContentLoaded', function() {
            document.body.style.opacity = '0';
            setTimeout(() => { document.body.style.opacity = '1'; }, 300);
        });
        secretInput.addEventListener('focus', function() { this.style.transform = 'translateY(-2px)'; });
        secretInput.addEventListener('blur', function() { this.style.transform = 'translateY(0)'; });

    </script>
</body>
</html>